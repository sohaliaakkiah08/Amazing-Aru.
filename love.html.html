<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Amazing Aru - Heart Quest</title>
  <style>
    html,body{height:100%;margin:0;background:#0b0b0f;font-family:Arial,Helvetica,sans-serif;color:#fff}
    .wrap{height:100%;display:flex;align-items:center;justify-content:center}
    canvas{image-rendering:pixelated;border:6px solid #ff4d94;background:#111}
    #ui{position:absolute;top:18px;left:18px;background:#000000c9;padding:10px;border:3px solid #ff4d94;border-radius:8px;font-family:monospace}
    #startOverlay,#winOverlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.75)}
    .panel{background:#071218;border:4px solid #ff4d94;padding:24px;border-radius:12px;text-align:center;font-family:monospace}
    .btn{display:inline-block;padding:10px 18px;margin-top:12px;border-radius:8px;border:none;background:#ff4d94;color:#fff;cursor:pointer;font-weight:bold}
  </style>
</head>
<body>
<div id="startOverlay">
  <div class="panel">
    <h1 style="margin:6px 0;font-size:18px">AMAZING ARU - HEART QUEST</h1>
    <div style="font-size:12px;margin-top:6px">Collect 10 hearts and reach the centre within 30:00</div>
    <div style="text-align:left;margin-top:12px;font-size:12px">Controls: Arrow keys or WASD</div>
    <button id="startBtn" class="btn">Start Game</button>
  </div>
</div>
<div id="winOverlay" style="display:none">
  <div class="panel">
    <h1 style="margin:6px 0;font-size:18px">YOU WON!</h1>
    <div id="finalMsg" style="font-size:13px;margin-top:10px"></div>
    <button id="playAgain" class="btn">Play Again</button>
  </div>
</div>
<div class="wrap">
  <canvas id="game"></canvas>
</div>
<div id="ui">
  <div>Time: <span id="time">30:00</span></div>
  <div>Hearts: <span id="collected">0</span>/10</div>
  <div style="margin-top:6px;font-size:12px">Player: AMAZING ARU</div>
</div>
<script>
const maze=[
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1],
[1,0,1,0,1,0,1,1,0,1,0,1,0,1,0,1],
[1,0,1,0,0,0,0,1,0,0,0,1,0,1,0,1],
[1,0,1,1,1,1,0,1,1,1,0,1,0,1,0,1],
[1,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1],
[1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1],
[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
[1,0,1,1,1,1,0,1,1,1,1,1,0,1,0,1],
[1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1],
[1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1],
[1,0,0,1,0,0,0,1,0,0,0,1,0,1,0,1],
[1,0,1,1,1,1,0,1,1,1,0,1,0,1,0,1],
[1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];
const tile=40;
const cols=maze[0].length;
const rows=maze.length;
const canvas=document.getElementById('game');
canvas.width=cols*tile;
canvas.height=rows*tile;
const ctx=canvas.getContext('2d');
const timeEl=document.getElementById('time');
const collectedEl=document.getElementById('collected');
const startOverlay=document.getElementById('startOverlay');
const winOverlay=document.getElementById('winOverlay');
const finalMsg=document.getElementById('finalMsg');
const startBtn=document.getElementById('startBtn');
const playAgain=document.getElementById('playAgain');
let player={x:1,y:1};
let collected=0;
let started=false;
let remaining=30*60;
let musicOn=false;
let hearts=[
{x:2,y:1,msg:'You light up my life everyday',collected:false},
{x:3,y:1,msg:'You are the funniest person I know ;)',collected:false},
{x:5,y:1,msg:'Your smile makes my heart happy',collected:false},
{x:6,y:1,msg:'You will always be my baby',collected:false},
{x:8,y:1,msg:'You are loved more than you will ever know',collected:false},
{x:10,y:1,msg:"I can't wait to grow old with you",collected:false},
{x:12,y:1,msg:'You are such a sweetie pie',collected:false},
{x:13,y:1,msg:"You're my amazing human/genius",collected:false},
{x:14,y:1,msg:"I can't wait to hold you and not let go",collected:false},
{x:7,y:7,msg:'You are the love of my Life and I am forever grateful for you',collected:false}
];
let audioCtx=null;
function ensureAudio(){
  if(!audioCtx)audioCtx=new (window.AudioContext||window.webkitAudioContext)();
}
function playBeep(freq,dur){
  ensureAudio();
  const o=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  o.type='square';
  o.frequency.value=freq;
  g.gain.value=0.0001;
  o.connect(g);g.connect(audioCtx.destination);
  o.start();
  g.gain.exponentialRampToValueAtTime(0.08,audioCtx.currentTime+0.01);
  g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+dur/1000);
  setTimeout(()=>{o.stop()},dur);
}
let musicInterval=null;
function startMusic(){
  ensureAudio();
  if(musicInterval)return;
  const notes=[262,330,392,523,392,330];
  let i=0;
  musicInterval=setInterval(()=>{playBeep(notes[i%notes.length],120);i++;},180);
}
function stopMusic(){
  if(musicInterval){clearInterval(musicInterval);musicInterval=null}
}
function drawGrid(){
  ctx.fillStyle='#071018';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      if(maze[y][x]===1){
        ctx.fillStyle='#2b2b2b';
        ctx.fillRect(x*tile,y*tile,tile,tile);
      } else {
        ctx.fillStyle='#0b1220';
        ctx.fillRect(x*tile,y*tile,tile,tile);
      }
    }
  }
}
function drawHearts(){
  hearts.forEach(h=>{
    if(!h.collected){
      const cx=h.x*tile+tile/2;
      const cy=h.y*tile+tile/2;
      ctx.save();
      ctx.translate(cx,cy);
      ctx.scale(1.2,1.2);
      ctx.beginPath();
      ctx.moveTo(0,-8);
      ctx.bezierCurveTo(12,-26,40,-10,0,30);
      ctx.bezierCurveTo(-40,-10,-12,-26,0,-8);
      ctx.fillStyle='#ff4d94';
      ctx.fill();
      ctx.restore();
    }
  });
}
function drawPlayer(){
  const px=player.x*tile+tile/2;
  const py=player.y*tile+tile/2;
  ctx.save();
  ctx.translate(px,py);
  ctx.fillStyle='#4dffff';
  ctx.fillRect(-10,-12,20,24);
  ctx.fillStyle='#071018';
  ctx.fillRect(-6,-4,12,8);
  ctx.restore();
}
function draw(){
  drawGrid();
  drawHearts();
  drawPlayer();
}
function showMessage(text){
  const div=document.createElement('div');
  div.style.position='absolute';
  div.style.left='50%';
  div.style.top='16px';
  div.style.transform='translateX(-50%)';
  div.style.background='#000000d9';
  div.style.border='3px solid #ff4d94';
  div.style.padding='10px 14px';
  div.style.borderRadius='8px';
  div.style.fontFamily='monospace';
  div.innerText=text;
  document.body.appendChild(div);
  setTimeout(()=>div.remove(),2600);
}
function tryCollect(){
  hearts.forEach(h=>{
    if(!h.collected && h.x===player.x && h.y===player.y){
      h.collected=true;
      collected++;
      collectedEl.innerText=collected;
      playBeep(880,200);
      showMessage(h.msg);
    }
  });
}
function checkWin(){
  if(collected>=10 && player.x===7 && player.y===7){
    endGame(true);
  }
}
function endGame(won){
  started=false;
  stopMusic();
  const text=won?"You are the love of my Life and I am forever grateful for you":"Time's up";
  finalMsg.innerText=text;
  winOverlay.style.display='flex';
  playBeep(660,300);
}
function resetGame(){
  player={x:1,y:1};
  hearts.forEach(h=>h.collected=false);
  collected=0;
  collectedEl.innerText=collected;
  remaining=30*60;
  timeEl.innerText=formatTime(remaining);
  winOverlay.style.display='none';
  startOverlay.style.display='flex';
  draw();
}
function formatTime(s){
  const m=Math.floor(s/60).toString().padStart(2,'0');
  const sec=(s%60).toString().padStart(2,'0');
  return m+':'+sec;
}
let tickInterval=null;
function startGame(){
  if(started)return;
  started=true;
  startOverlay.style.display='none';
  winOverlay.style.display='none';
  playBeep(440,120);
  startMusic();
  tickInterval=setInterval(()=>{
    if(!started) return;
    remaining--;
    timeEl.innerText=formatTime(remaining);
    if(remaining<=0){
      clearInterval(tickInterval);
      endGame(false);
    }
  },1000);
}
startBtn.addEventListener('click',()=>{startGame();if(audioCtx&&audioCtx.state==='suspended'){audioCtx.resume()}});
playAgain.addEventListener('click',()=>{resetGame();});
window.addEventListener('keydown',e=>{
  if(!started) return;
  const k=e.key.toLowerCase();
  let dx=0;let dy=0;
  if(k==='arrowup' || k==='w') dy=-1;
  if(k==='arrowdown' || k==='s') dy=1;
  if(k==='arrowleft' || k==='a') dx=-1;
  if(k==='arrowright' || k==='d') dx=1;
  if(dx!==0 || dy!==0){
    const nx=player.x+dx;const ny=player.y+dy;
    if(ny>=0 && ny<rows && nx>=0 && nx<cols && maze[ny][nx]===0){
      player.x=nx;player.y=ny;playBeep(660,80);tryCollect();checkWin();draw();
    }
    e.preventDefault();
  }
});
draw();
</script>
</body>
</html>
